{"ast":null,"code":"import _objectSpread from\"C:/Users/NICKSON/Contacts/Desktop/Deliverieseasy/DELIVERIES-APP/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useState}from\"react\";// ------------------- User Type -------------------\n// ------------------- Auth Context Type -------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";// ------------------- Create Context -------------------\nconst AuthContext=/*#__PURE__*/createContext({user:null,token:null,login:()=>{},logout:()=>{},updateUser:()=>{}});// ------------------- Auth Provider -------------------\nexport const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(()=>{const storedUser=localStorage.getItem(\"user\");return storedUser?JSON.parse(storedUser):null;});const[token,setToken]=useState(()=>{return localStorage.getItem(\"token\")||null;});const login=_ref2=>{let{user,token}=_ref2;setUser(user);setToken(token);localStorage.setItem(\"user\",JSON.stringify(user));localStorage.setItem(\"token\",token);};const logout=()=>{setUser(null);setToken(null);localStorage.removeItem(\"user\");localStorage.removeItem(\"token\");};const updateUser=updatedUser=>{setUser(prev=>{if(!prev)return null;const newUser=_objectSpread(_objectSpread({},prev),updatedUser);localStorage.setItem(\"user\",JSON.stringify(newUser));return newUser;});};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,token,login,logout,updateUser},children:children});};// ---------------- Hook to Use Auth Context ----------------\nexport const useAuth=()=>useContext(AuthContext);","map":{"version":3,"names":["React","createContext","useContext","useState","jsx","_jsx","AuthContext","user","token","login","logout","updateUser","AuthProvider","_ref","children","setUser","storedUser","localStorage","getItem","JSON","parse","setToken","_ref2","setItem","stringify","removeItem","updatedUser","prev","newUser","_objectSpread","Provider","value","useAuth"],"sources":["C:/Users/NICKSON/Contacts/Desktop/Deliverieseasy/DELIVERIES-APP/src/context/authContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, ReactNode } from \"react\";\r\n\r\n// ------------------- User Type -------------------\r\nexport interface User {\r\n  name: string;\r\n  email: string;\r\n  role: \"admin\" | \"driver\" | \"user\";\r\n  avatar?: string | null; // allow null\r\n  phone?: string | null;   // allow phone field\r\n}\r\n\r\n// ------------------- Auth Context Type -------------------\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  token: string | null;\r\n  login: ({ user, token }: { user: User; token: string }) => void;\r\n  logout: () => void;\r\n  updateUser: (updatedUser: Partial<User>) => void;\r\n}\r\n\r\n// ------------------- Create Context -------------------\r\nconst AuthContext = createContext<AuthContextType>({\r\n  user: null,\r\n  token: null,\r\n  login: () => {},\r\n  logout: () => {},\r\n  updateUser: () => {},\r\n});\r\n\r\n// ------------------- Auth Provider -------------------\r\nexport const AuthProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\r\n  const [user, setUser] = useState<User | null>(() => {\r\n    const storedUser = localStorage.getItem(\"user\");\r\n    return storedUser ? JSON.parse(storedUser) : null;\r\n  });\r\n\r\n  const [token, setToken] = useState<string | null>(() => {\r\n    return localStorage.getItem(\"token\") || null;\r\n  });\r\n\r\n  const login = ({ user, token }: { user: User; token: string }) => {\r\n    setUser(user);\r\n    setToken(token);\r\n    localStorage.setItem(\"user\", JSON.stringify(user));\r\n    localStorage.setItem(\"token\", token);\r\n  };\r\n\r\n  const logout = () => {\r\n    setUser(null);\r\n    setToken(null);\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"token\");\r\n  };\r\n\r\n  const updateUser = (updatedUser: Partial<User>) => {\r\n    setUser(prev => {\r\n      if (!prev) return null;\r\n      const newUser = { ...prev, ...updatedUser };\r\n      localStorage.setItem(\"user\", JSON.stringify(newUser));\r\n      return newUser;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, token, login, logout, updateUser }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\n// ---------------- Hook to Use Auth Context ----------------\r\nexport const useAuth = () => useContext(AuthContext);\r\n"],"mappings":"oJAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,KAAmB,OAAO,CAE7E;AASA;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBASA;AACA,KAAM,CAAAC,WAAW,cAAGL,aAAa,CAAkB,CACjDM,IAAI,CAAE,IAAI,CACVC,KAAK,CAAE,IAAI,CACXC,KAAK,CAAEA,CAAA,GAAM,CAAC,CAAC,CACfC,MAAM,CAAEA,CAAA,GAAM,CAAC,CAAC,CAChBC,UAAU,CAAEA,CAAA,GAAM,CAAC,CACrB,CAAC,CAAC,CAEF;AACA,MAAO,MAAM,CAAAC,YAA+C,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC1E,KAAM,CAACN,IAAI,CAAEQ,OAAO,CAAC,CAAGZ,QAAQ,CAAc,IAAM,CAClD,KAAM,CAAAa,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC/C,MAAO,CAAAF,UAAU,CAAGG,IAAI,CAACC,KAAK,CAACJ,UAAU,CAAC,CAAG,IAAI,CACnD,CAAC,CAAC,CAEF,KAAM,CAACR,KAAK,CAAEa,QAAQ,CAAC,CAAGlB,QAAQ,CAAgB,IAAM,CACtD,MAAO,CAAAc,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAI,IAAI,CAC9C,CAAC,CAAC,CAEF,KAAM,CAAAT,KAAK,CAAGa,KAAA,EAAoD,IAAnD,CAAEf,IAAI,CAAEC,KAAqC,CAAC,CAAAc,KAAA,CAC3DP,OAAO,CAACR,IAAI,CAAC,CACbc,QAAQ,CAACb,KAAK,CAAC,CACfS,YAAY,CAACM,OAAO,CAAC,MAAM,CAAEJ,IAAI,CAACK,SAAS,CAACjB,IAAI,CAAC,CAAC,CAClDU,YAAY,CAACM,OAAO,CAAC,OAAO,CAAEf,KAAK,CAAC,CACtC,CAAC,CAED,KAAM,CAAAE,MAAM,CAAGA,CAAA,GAAM,CACnBK,OAAO,CAAC,IAAI,CAAC,CACbM,QAAQ,CAAC,IAAI,CAAC,CACdJ,YAAY,CAACQ,UAAU,CAAC,MAAM,CAAC,CAC/BR,YAAY,CAACQ,UAAU,CAAC,OAAO,CAAC,CAClC,CAAC,CAED,KAAM,CAAAd,UAAU,CAAIe,WAA0B,EAAK,CACjDX,OAAO,CAACY,IAAI,EAAI,CACd,GAAI,CAACA,IAAI,CAAE,MAAO,KAAI,CACtB,KAAM,CAAAC,OAAO,CAAAC,aAAA,CAAAA,aAAA,IAAQF,IAAI,EAAKD,WAAW,CAAE,CAC3CT,YAAY,CAACM,OAAO,CAAC,MAAM,CAAEJ,IAAI,CAACK,SAAS,CAACI,OAAO,CAAC,CAAC,CACrD,MAAO,CAAAA,OAAO,CAChB,CAAC,CAAC,CACJ,CAAC,CAED,mBACEvB,IAAA,CAACC,WAAW,CAACwB,QAAQ,EAACC,KAAK,CAAE,CAAExB,IAAI,CAAEC,KAAK,CAAEC,KAAK,CAAEC,MAAM,CAAEC,UAAW,CAAE,CAAAG,QAAA,CACrEA,QAAQ,CACW,CAAC,CAE3B,CAAC,CAED;AACA,MAAO,MAAM,CAAAkB,OAAO,CAAGA,CAAA,GAAM9B,UAAU,CAACI,WAAW,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}